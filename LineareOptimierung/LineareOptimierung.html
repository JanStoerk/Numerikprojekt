<!doctype html>
<html>

<head>
    <!-- CSS Dateien -->
    <link rel="stylesheet" href="../LandingPage/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" />

    <!-- JavaScript Dateien -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.4.4/math.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.12.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/algebrite@1.4.0/dist/algebrite.bundle-for-browser.min.js"></script>


    <meta charset="UTF-8">
</head>

<body>
    <header class="header">
        <div class="brand">
            <a href="../LandingPage/index.html" style="color:white;" class="link">
                <img src="../pictures/infinite.png" style="width:50px; height:30px; align-self: center;" alt="Numerik">
                <h1>Numerik</h1>
            </a>
        </div>
        <button class="guide" onclick="showGuide()">
            <img src="../pictures/guide.png" style="width:30px" alt="Guide">
            <h4>Guide</h4>
        </button>
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closePopup()">&times;</span>
                <p>das Branch-and-Bound-Verfahren kann sehr schnell zu einer großen Anzahl von Knoten und damit zu einem
                    großen Baum führen, insbesondere wenn die Dimension des Problems oder die Anzahl der Variablen
                    steigt. Dies liegt an der Natur des Verfahrens, das darauf basiert, den Lösungsraum rekursiv in
                    kleinere Teilräume (Teilprobleme) zu unterteilen und zu prüfen.
                    Warum wächst der Baum so schnell?
                    Exponentielles Wachstum:

                    Bei jedem Schritt wird der Lösungsraum in zwei oder mehr Teilräume unterteilt. Bei
                    𝑛
                    n Variablen und
                    𝑏
                    b möglichen Grenzen pro Variable können im schlimmsten Fall bis zu
                    𝑏
                    𝑛
                    b
                    n
                    Knoten im Baum entstehen. Das bedeutet, dass die Anzahl der Knoten exponentiell mit der Anzahl der
                    Variablen und den möglichen Grenzen ansteigt.
                    Verzweigung in jede Richtung:

                    Für jede Variable wird in beide Richtungen (kleinere und größere Werte) verzweigt, um alle möglichen
                    Lösungen zu erkunden. Dies führt dazu, dass der Baum schnell sehr breit und tief wird.
                    Zahlreiche Begrenzungen und Einschränkungen:

                    Wenn das Problem viele Einschränkungen hat, könnte das Verfahren viele Möglichkeiten erkunden, bevor
                    es die optimalen Werte findet. Dies erhöht ebenfalls die Anzahl der Knoten.</p>
                    <p>
                        . Verständnis des Verfahrens: Baumstruktur und Iteration
Du arbeitest mit einem iterativen Verfahren, das einen Baum aufbaut. Jeder Knoten im Baum repräsentiert eine potenzielle Lösung.
Die Knoten werden durch das Teilen des Suchraums erzeugt. Der ursprüngliche Suchraum (die Wurzel) wird in Unterräume aufgeteilt, und die Mitte jedes Teilraums wird als potenzielle Lösung getestet.
Jeder Knoten hat eine Eltern-Knoten und kann mehrere Kind-Knoten haben, die jeweils einen weiteren Unterraum repräsentieren.
2. Wie werden Lösungen ausgewählt und getestet?
In jedem Schritt wird ein Knoten aus einem Stapel (stack) genommen. Dieser Stapel enthält alle noch zu untersuchenden Teilräume.
Der ausgewählte Knoten repräsentiert einen Bereich im Suchraum mit bestimmten Grenzen (bounds).
Die Methode wählt dann die Mitte des Teilraums als potenzielle Lösung (das sogenannte "Midpoint-Verfahren"). Diese Mitte wird getestet, um festzustellen, ob sie eine bessere Lösung als die bisherige beste Lösung ist.
Welche Lösung als erstes getestet wird, hängt also davon ab, welcher Knoten als erstes vom Stapel genommen wird, und das wird wiederum durch die Reihenfolge der Knoten bestimmt, die durch die rekursive Aufteilung des Suchraums entstehen.
3. Können Lösungen mehrfach erzeugt werden?
Ja, mehrfache Erzeugung gleicher Lösungen ist möglich. Dies kann in folgenden Szenarien auftreten:

Unterschiedliche Teilbäume könnten ähnliche oder sogar identische Lösungen erzeugen, wenn sie Teilräume überlappen. Stell dir das vor wie zwei Äste eines Baumes, die sich in unterschiedlichen Teilen der Iteration verzweigen, aber schließlich den gleichen Bereich des Suchraums repräsentieren.
Bei jeder Iteration wird die Mitte des aktuellen Teilraums als neue Lösung getestet. Wenn mehrere Teilbäume Bereiche erzeugen, deren Mittelpunkte identisch sind, wird diese Lösung mehrfach als Knoten erzeugt.
Beispiel:

Nehmen wir an, der Suchraum reicht von 
[
0
,
100
]
[0,100] und du teilst ihn in zwei Hälften: 
[
0
,
50
]
[0,50] und 
[
51
,
100
]
[51,100]. Die Mitte von 
[
0
,
50
]
[0,50] ist 
25
25, und die Mitte von 
[
51
,
100
]
[51,100] ist 
75
75.
Wenn du weiter unterteilst, könnten Teilräume wie 
[
0
,
25
]
[0,25] und 
[
26
,
50
]
[26,50] den gleichen Wert 
12
12 oder 
38
38 als Mitte haben. Wenn zwei verschiedene Äste diese gleichen Mittelpunkte erzeugen, werden die Knoten doppelt erzeugt, obwohl sie dieselbe Lösung darstellen.
4. Wie wird festgelegt, welche Lösung getestet wird?
Priorität des Stapels (Stack): Der Stapel bestimmt, in welcher Reihenfolge Teilräume untersucht werden. Normalerweise funktioniert der Stapel wie eine Last-In-First-Out (LIFO)-Struktur, was bedeutet, dass der zuletzt hinzugefügte Teilraum als nächstes untersucht wird.
Das bedeutet: Welche Lösung getestet wird, hängt von der Reihenfolge ab, in der die Teilräume in den Stapel gelegt werden.
                    </p>
            </div>
        </div>
    </header>
    <div class="content">
        <h4><b>Lineare Optimierung: Branch & Bound Verfahren</b><button class="fa fa-info-circle" onclick="showGuide()"
                style="font-size:24px; margin-left: 10px; color:grey; border:0; background-color: transparent;"></button>
        </h4><br>
        <div style="display: flex; justify-content: space-around; align-items: center;">
            <div style="flex: 1; text-align: center;">
                <table style="margin: auto;" class="table table-hover" id="nebenbedingungen">
                    <tbody>
                        <tr>
                            <td><label for="funktion">Maximierungsproblem</label></td>
                            <td><input type="text" id="funktion"></td>
                        </tr>
                        <tr>
                            <td><label for="untereGrenze">Nebenbedingung 1</label></td>
                            <td><input type="text" id="nebenbedingung1"></td>
                        </tr>
                        <tr>
                            <td><label for="obereGrenze">Nebenbedingung 2</label></td>
                            <td><input type="text" id="nebenbedingung2"></td>
                        </tr>
                    </tbody>
                </table>
                <br>
                <button id="btnZeichne" class="btn btn-secondary">Nebenbedingung hinzufügen</button> <br><br>
                <div class="controls">
                    <div style="margin:auto; display:flex">
                        <button id="skip-back">
                            <i class="fas fa-backward"></i>
                        </button>
                        <button id="btnStart" style="margin-inline: 20px;">
                            <i class="fas fa-play" id="play-icon"></i>
                            <i class="fas fa-pause" id="pause-icon" style="display: none;"></i>
                        </button>
                        <button id="skip-forward">
                            <i class="fas fa-forward"></i>
                        </button>
                    </div>
                </div>
                <br>
                <!-- <input type="checkbox" style="margin-top: 10px;" id="myCheckbox" class="form-check-input"> <label
                    id="checkboxLabel" for="myCheckbox">Binäres Problem</label> -->
            </div>
            <div>
                <div style="display: flex; align-items: center; justify-content: center;">
                    <span class="badge rounded-pill bg-success">Beste Lösung</span>
                    <span class="badge rounded-pill bg-primary">Gültige Lösung</span>
                    <span class="badge rounded-pill bg-danger">Ungültige Lösung</span>
                    <!--  <span class="badge rounded-pill bg-warning text-dark">Momentan beste Lösung</span>-->
                    <span class="badge rounded-pill bg-dark">Verworfener Teilbaum</span>
                </div>
                <div id="ggb-element"
                    style="flex: 1; text-align: center; margin: auto; height:600px; width:600px; border:1px solid black">
                </div>
                <br>
            </div>
            <div style="flex: 1; text-align: center; margin-left:30px">
                <button id="branchButton" class="btn btn-secondary" disabled>Abweichungsdiagramm     
                    erstellen</button><br><br>
                <table style="margin: auto;" class="table table-hover" id="nebenbedingungen">
                    <tbody>
                        <tr>
                            <td><label for="funktion">Obere Schranke</label></td>
                            <td><label id="obereSchranke"></td>
                        </tr>
                        <tr>
                            <td><label for="untereGrenze">Untere Schranke</label></td>
                            <td><label id="untereSchranke"></td>
                        </tr>
                        <tr>
                            <td><label for="obereGrenze">Momentan beste Lösung</label></td>
                            <td><label id="momentanesErgebnis"></td>
                        </tr>
                        <tr>
                            <td><label for="obereGrenze">Ergebnis</label></td>
                            <td><label id="optimalesErgebnis"></td>
                        </tr>
                        <tr>
                            <td><label for="obereGrenze">Anzahl weiterer möglicher Lösungen</label></td>
                            <td><label id="anzahlLoesungen"></td>
                        </tr>
                        <tr>
                            <td><label for="obereGrenze">Anzahl verworfener Teilbäume</label></td>
                            <td><label id="prunedTrees"></td>
                        </tr>
                    </tbody>
                </table>
                <div id="resultContainer"></div><br>
            </div>
        </div>
        <div id="diagramm" style="width:1400px;height:400px;display:none"></div>
    </div>
    <script src="./script.js"></script>
</body>

</html>